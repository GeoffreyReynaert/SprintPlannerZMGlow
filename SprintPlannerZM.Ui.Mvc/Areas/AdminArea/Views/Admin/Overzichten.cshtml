@using SprintPlannerZM.Model
@model IList<SprintPlannerZM.Model.Hulpleerling>

<head>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.6-rc.0/css/select2.min.css" rel="stylesheet"/>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.6-rc.0/js/select2.min.js"></script>
    <link href="~/css/bootstrap-extensions.css" rel="stylesheet" asp-append-version="true"/>
    <script src="~/js/site.js"></script>

</head>

<section class="left-allignToNav pt-3">
    <div class="tbl-header">
        <table>
            <thead>
            <tr>
                <th class="h6">Type generatie</th>
                <th class="h6">Specificatie</th>
                <th class="h6">Overzicht weergave</th>
            </tr>
            </thead>
        </table>
    </div>
    <div class="tbl-content">
        <div class="container">
            <table>
                <tr class="trBordercolor">
                    <td>
                        <span id="aantalPerDul">Aantal per dag / uur/ lokaal</span>
                    </td>
                    <td></td>
                    <td>
                        <btn class="btn btn-primary" id="makenDul">Excel maken</btn>
                    </td>
                </tr>
                <tr class="trBordercolor">
                    <td>
                        <span id="toezichtPerLeerkracht">Toezicht per leerkracht</span>
                    </td>
                    <td></td>
                    <td>
                        <btn class="btn btn-primary" id="makenTpl">Excel maken</btn>
                    </td>
                </tr>
                <tr class="trBordercolor">
                    <td>
                        <span id="examenPerLeerling">Examen per leerling</span>
                    </td>
                    <td>
                        <select class="form-control select2" id="cmbLeerlingen">
                            <option id="index">---Alle Leerlingen---</option>
                            @foreach (var hulpleerling in Model)
                            {
                                if (hulpleerling.Leerlingverdelingen.Any())
                                {
                                    <option value="@hulpleerling.hulpleerlingID">@hulpleerling.Leerling.familieNaam @hulpleerling.Leerling.voorNaam</option>
                                }
                            }
                        </select>
                    </td>
                    <td>
                        <btn class="btn btn-primary" id="makenEpl">Excel maken</btn>
                    </td>
                </tr>
            </table>
        </div>
    </div>
</section>

<script>
    $(".select2").select2();
    $("#makenDul").click(function () {
        $(this).load("AantalPerDul");
    });
    $("#makenTpl").click(function() {
        $(this).load("ToezichtPerLeerkracht");
    });
    $("#makenEpl").click(function() {
        const selectVal = $("#cmbLeerlingen").find('option:selected').val();
        if (selectVal !== '---Alle Leerlingen---') {
            $(this).load("ExamenPerLeerling", { hulpleerlingId: selectVal });
        } else {
            $(this).load("ExamenPerLeerling", { hulpleerlingId: -1 });
        }
    });
</script>